{"dependencies":[{"name":"./core.defaults","loc":{"line":3,"column":23}},{"name":"./core.element","loc":{"line":4,"column":22}},{"name":"../helpers/index","loc":{"line":5,"column":22}}],"generated":{"js":"\"use strict\";var t=require(\"./core.defaults\"),e=require(\"./core.element\"),o=require(\"../helpers/index\");t._set(\"global\",{tooltips:{enabled:!0,custom:null,mode:\"nearest\",position:\"average\",intersect:!0,backgroundColor:\"rgba(0,0,0,0.8)\",titleFontStyle:\"bold\",titleSpacing:2,titleMarginBottom:6,titleFontColor:\"#fff\",titleAlign:\"left\",bodySpacing:2,bodyFontColor:\"#fff\",bodyAlign:\"left\",footerFontStyle:\"bold\",footerSpacing:2,footerMarginTop:6,footerFontColor:\"#fff\",footerAlign:\"left\",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:\"#fff\",displayColors:!0,borderColor:\"rgba(0,0,0,0)\",borderWidth:0,callbacks:{beforeTitle:o.noop,title:function(t,e){var o=\"\",i=e.labels,r=i?i.length:0;if(t.length>0){var n=t[0];n.xLabel?o=n.xLabel:r>0&&n.index<r&&(o=i[n.index])}return o},afterTitle:o.noop,beforeBody:o.noop,beforeLabel:o.noop,label:function(t,e){var o=e.datasets[t.datasetIndex].label||\"\";return o&&(o+=\": \"),o+=t.yLabel},labelColor:function(t,e){var o=e.getDatasetMeta(t.datasetIndex).data[t.index]._view;return{borderColor:o.borderColor,backgroundColor:o.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:o.noop,afterBody:o.noop,beforeFooter:o.noop,footer:o.noop,afterFooter:o.noop}}}),module.exports=function(i){function r(t,e){var i=o.color(t);return i.alpha(e*i.alpha()).rgbaString()}function n(t,e){return e&&(o.isArray(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function l(t){var e=t._xScale,o=t._yScale||t._scale,i=t._index,r=t._datasetIndex;return{xLabel:e?e.getLabelForIndex(i,r):\"\",yLabel:o?o.getLabelForIndex(i,r):\"\",index:i,datasetIndex:r,x:t._model.x,y:t._model.y}}function a(e){var i=t.global,r=o.valueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:r(e.bodyFontFamily,i.defaultFontFamily),_bodyFontStyle:r(e.bodyFontStyle,i.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:r(e.bodyFontSize,i.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:r(e.titleFontFamily,i.defaultFontFamily),_titleFontStyle:r(e.titleFontStyle,i.defaultFontStyle),titleFontSize:r(e.titleFontSize,i.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:r(e.footerFontFamily,i.defaultFontFamily),_footerFontStyle:r(e.footerFontStyle,i.defaultFontStyle),footerFontSize:r(e.footerFontSize,i.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}i.Tooltip=e.extend({initialize:function(){this._model=a(this._options),this._lastActive=[]},getTitle:function(){var t=this._options.callbacks,e=t.beforeTitle.apply(this,arguments),o=t.title.apply(this,arguments),i=t.afterTitle.apply(this,arguments),r=[];return r=n(r=n(r=n(r,e),o),i)},getBeforeBody:function(){var t=this._options.callbacks.beforeBody.apply(this,arguments);return o.isArray(t)?t:void 0!==t?[t]:[]},getBody:function(t,e){var i=this,r=i._options.callbacks,l=[];return o.each(t,function(t){var o={before:[],lines:[],after:[]};n(o.before,r.beforeLabel.call(i,t,e)),n(o.lines,r.label.call(i,t,e)),n(o.after,r.afterLabel.call(i,t,e)),l.push(o)}),l},getAfterBody:function(){var t=this._options.callbacks.afterBody.apply(this,arguments);return o.isArray(t)?t:void 0!==t?[t]:[]},getFooter:function(){var t=this._options.callbacks,e=t.beforeFooter.apply(this,arguments),o=t.footer.apply(this,arguments),i=t.afterFooter.apply(this,arguments),r=[];return r=n(r=n(r=n(r,e),o),i)},update:function(t){var e,r,n=this,d=n._options,f=n._model,c=n._model=a(d),y=n._active,h=n._data,g={xAlign:f.xAlign,yAlign:f.yAlign},s={x:f.x,y:f.y},u={width:f.width,height:f.height},b={x:f.caretX,y:f.caretY};if(y.length){c.opacity=1;var p=[],x=[];b=i.Tooltip.positioners[d.position].call(n,y,n._eventPosition);var F=[];for(e=0,r=y.length;e<r;++e)F.push(l(y[e]));d.filter&&(F=F.filter(function(t){return d.filter(t,h)})),d.itemSort&&(F=F.sort(function(t,e){return d.itemSort(t,e,h)})),o.each(F,function(t){p.push(d.callbacks.labelColor.call(n,t,n._chart)),x.push(d.callbacks.labelTextColor.call(n,t,n._chart))}),c.title=n.getTitle(F,h),c.beforeBody=n.getBeforeBody(F,h),c.body=n.getBody(F,h),c.afterBody=n.getAfterBody(F,h),c.footer=n.getFooter(F,h),c.x=Math.round(b.x),c.y=Math.round(b.y),c.caretPadding=d.caretPadding,c.labelColors=p,c.labelTextColors=x,c.dataPoints=F,s=function(t,e,o){var i=t.x,r=t.y,n=t.caretSize,l=t.caretPadding,a=t.cornerRadius,d=o.xAlign,f=o.yAlign,c=n+l,y=a+l;return\"right\"===d?i-=e.width:\"center\"===d&&(i-=e.width/2),\"top\"===f?r+=c:r-=\"bottom\"===f?e.height+c:e.height/2,\"center\"===f?\"left\"===d?i+=c:\"right\"===d&&(i-=c):\"left\"===d?i-=y:\"right\"===d&&(i+=y),{x:i,y:r}}(c,u=function(t,e){var i=t._chart.ctx,r=2*e.yPadding,n=0,l=e.body,a=l.reduce(function(t,e){return t+e.before.length+e.lines.length+e.after.length},0);a+=e.beforeBody.length+e.afterBody.length;var d=e.title.length,f=e.footer.length,c=e.titleFontSize,y=e.bodyFontSize,h=e.footerFontSize;r+=d*c,r+=d?(d-1)*e.titleSpacing:0,r+=d?e.titleMarginBottom:0,r+=a*y,r+=a?(a-1)*e.bodySpacing:0,r+=f?e.footerMarginTop:0,r+=f*h,r+=f?(f-1)*e.footerSpacing:0;var g=0,s=function(t){n=Math.max(n,i.measureText(t).width+g)};return i.font=o.fontString(c,e._titleFontStyle,e._titleFontFamily),o.each(e.title,s),i.font=o.fontString(y,e._bodyFontStyle,e._bodyFontFamily),o.each(e.beforeBody.concat(e.afterBody),s),g=e.displayColors?y+2:0,o.each(l,function(t){o.each(t.before,s),o.each(t.lines,s),o.each(t.after,s)}),g=0,i.font=o.fontString(h,e._footerFontStyle,e._footerFontFamily),o.each(e.footer,s),{width:n+=2*e.xPadding,height:r}}(this,c),g=function(t,e){var o=t._model,i=t._chart,r=t._chart.chartArea,n=\"center\",l=\"center\";o.y<e.height?l=\"top\":o.y>i.height-e.height&&(l=\"bottom\");var a,d,f,c,y,h=(r.left+r.right)/2,g=(r.top+r.bottom)/2;\"center\"===l?(a=function(t){return t<=h},d=function(t){return t>h}):(a=function(t){return t<=e.width/2},d=function(t){return t>=i.width-e.width/2}),f=function(t){return t+e.width>i.width},c=function(t){return t-e.width<0},y=function(t){return t<=g?\"top\":\"bottom\"},a(o.x)?(n=\"left\",f(o.x)&&(n=\"center\",l=y(o.y))):d(o.x)&&(n=\"right\",c(o.x)&&(n=\"center\",l=y(o.y)));var s=t._options;return{xAlign:s.xAlign?s.xAlign:n,yAlign:s.yAlign?s.yAlign:l}}(this,u))}else c.opacity=0;return c.xAlign=g.xAlign,c.yAlign=g.yAlign,c.x=s.x,c.y=s.y,c.width=u.width,c.height=u.height,c.caretX=b.x,c.caretY=b.y,n._model=c,t&&d.custom&&d.custom.call(n,c),n},drawCaret:function(t,e){var o=this._chart.ctx,i=this._view,r=this.getCaretPosition(t,e,i);o.lineTo(r.x1,r.y1),o.lineTo(r.x2,r.y2),o.lineTo(r.x3,r.y3)},getCaretPosition:function(t,e,o){var i,r,n,l,a,d,f=o.caretSize,c=o.cornerRadius,y=o.xAlign,h=o.yAlign,g=t.x,s=t.y,u=e.width,b=e.height;if(\"center\"===h)a=s+b/2,\"left\"===y?(r=(i=g)-f,n=i,l=a+f,d=a-f):(r=(i=g+u)+f,n=i,l=a-f,d=a+f);else if(\"left\"===y?(i=(r=g+c+f)-f,n=r+f):\"right\"===y?(i=(r=g+u-c-f)-f,n=r+f):(i=(r=g+u/2)-f,n=r+f),\"top\"===h)a=(l=s)-f,d=l;else{a=(l=s+b)+f,d=l;var p=n;n=i,i=p}return{x1:i,x2:r,x3:n,y1:l,y2:a,y3:d}},drawTitle:function(t,e,i,n){var l=e.title;if(l.length){i.textAlign=e._titleAlign,i.textBaseline=\"top\";var a=e.titleFontSize,d=e.titleSpacing;i.fillStyle=r(e.titleFontColor,n),i.font=o.fontString(a,e._titleFontStyle,e._titleFontFamily);var f,c;for(f=0,c=l.length;f<c;++f)i.fillText(l[f],t.x,t.y),t.y+=a+d,f+1===l.length&&(t.y+=e.titleMarginBottom-d)}},drawBody:function(t,e,i,n){var l=e.bodyFontSize,a=e.bodySpacing,d=e.body;i.textAlign=e._bodyAlign,i.textBaseline=\"top\",i.font=o.fontString(l,e._bodyFontStyle,e._bodyFontFamily);var f=0,c=function(e){i.fillText(e,t.x+f,t.y),t.y+=l+a};i.fillStyle=r(e.bodyFontColor,n),o.each(e.beforeBody,c);var y=e.displayColors;f=y?l+2:0,o.each(d,function(a,d){var f=r(e.labelTextColors[d],n);i.fillStyle=f,o.each(a.before,c),o.each(a.lines,function(o){y&&(i.fillStyle=r(e.legendColorBackground,n),i.fillRect(t.x,t.y,l,l),i.lineWidth=1,i.strokeStyle=r(e.labelColors[d].borderColor,n),i.strokeRect(t.x,t.y,l,l),i.fillStyle=r(e.labelColors[d].backgroundColor,n),i.fillRect(t.x+1,t.y+1,l-2,l-2),i.fillStyle=f),c(o)}),o.each(a.after,c)}),f=0,o.each(e.afterBody,c),t.y-=a},drawFooter:function(t,e,i,n){var l=e.footer;l.length&&(t.y+=e.footerMarginTop,i.textAlign=e._footerAlign,i.textBaseline=\"top\",i.fillStyle=r(e.footerFontColor,n),i.font=o.fontString(e.footerFontSize,e._footerFontStyle,e._footerFontFamily),o.each(l,function(o){i.fillText(o,t.x,t.y),t.y+=e.footerFontSize+e.footerSpacing}))},drawBackground:function(t,e,o,i,n){o.fillStyle=r(e.backgroundColor,n),o.strokeStyle=r(e.borderColor,n),o.lineWidth=e.borderWidth;var l=e.xAlign,a=e.yAlign,d=t.x,f=t.y,c=i.width,y=i.height,h=e.cornerRadius;o.beginPath(),o.moveTo(d+h,f),\"top\"===a&&this.drawCaret(t,i),o.lineTo(d+c-h,f),o.quadraticCurveTo(d+c,f,d+c,f+h),\"center\"===a&&\"right\"===l&&this.drawCaret(t,i),o.lineTo(d+c,f+y-h),o.quadraticCurveTo(d+c,f+y,d+c-h,f+y),\"bottom\"===a&&this.drawCaret(t,i),o.lineTo(d+h,f+y),o.quadraticCurveTo(d,f+y,d,f+y-h),\"center\"===a&&\"left\"===l&&this.drawCaret(t,i),o.lineTo(d,f+h),o.quadraticCurveTo(d,f,d+h,f),o.closePath(),o.fill(),e.borderWidth>0&&o.stroke()},draw:function(){var t=this._chart.ctx,e=this._view;if(0!==e.opacity){var o={width:e.width,height:e.height},i={x:e.x,y:e.y},r=Math.abs(e.opacity<.001)?0:e.opacity,n=e.title.length||e.beforeBody.length||e.body.length||e.afterBody.length||e.footer.length;this._options.enabled&&n&&(this.drawBackground(i,e,t,o,r),i.x+=e.xPadding,i.y+=e.yPadding,this.drawTitle(i,e,t,r),this.drawBody(i,e,t,r),this.drawFooter(i,e,t,r))}},handleEvent:function(t){var e=this._options,i=!1;if(this._lastActive=this._lastActive||[],\"mouseout\"===t.type?this._active=[]:this._active=this._chart.getElementsAtEventForMode(t,e.mode,e),!(i=!o.arrayEquals(this._active,this._lastActive)))return!1;if(this._lastActive=this._active,e.enabled||e.custom){this._eventPosition={x:t.x,y:t.y};var r=this._model;this.update(!0),this.pivot(),i|=r.x!==this._model.x||r.y!==this._model.y}return i}}),i.Tooltip.positioners={average:function(t){if(!t.length)return!1;var e,o,i=0,r=0,n=0;for(e=0,o=t.length;e<o;++e){var l=t[e];if(l&&l.hasValue()){var a=l.tooltipPosition();i+=a.x,r+=a.y,++n}}return{x:Math.round(i/n),y:Math.round(r/n)}},nearest:function(t,e){var i,r,n,l=e.x,a=e.y,d=Number.POSITIVE_INFINITY;for(i=0,r=t.length;i<r;++i){var f=t[i];if(f&&f.hasValue()){var c=f.getCenterPoint(),y=o.distanceBetweenPoints(e,c);y<d&&(d=y,n=f)}}if(n){var h=n.tooltipPosition();l=h.x,a=h.y}return{x:l,y:a}}}};"},"hash":"9428f6c4baac413f6a002011b3f57e40"}