{"dependencies":[{"name":"../core/core.defaults","loc":{"line":3,"column":23}},{"name":"../elements/index","loc":{"line":4,"column":23}},{"name":"../helpers/index","loc":{"line":5,"column":22}}],"generated":{"js":"\"use strict\";var e=require(\"../core/core.defaults\"),t=require(\"../elements/index\"),r=require(\"../helpers/index\");e._set(\"bar\",{hover:{mode:\"label\"},scales:{xAxes:[{type:\"category\",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:\"linear\"}]}}),e._set(\"horizontalBar\",{hover:{mode:\"index\",axis:\"y\"},scales:{xAxes:[{type:\"linear\",position:\"bottom\"}],yAxes:[{position:\"left\",type:\"category\",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:\"left\"}},tooltips:{callbacks:{title:function(e,t){var r=\"\";return e.length>0&&(e[0].yLabel?r=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(r=t.labels[e[0].index])),r},label:function(e,t){return(t.datasets[e.datasetIndex].label||\"\")+\": \"+e.xLabel}},mode:\"index\",axis:\"y\"}}),module.exports=function(e){e.controllers.bar=e.DatasetController.extend({dataElementType:t.Rectangle,initialize:function(){var t;e.DatasetController.prototype.initialize.apply(this,arguments),(t=this.getMeta()).stack=this.getDataset().stack,t.bar=!0},update:function(e){var t,r,a=this.getMeta().data;for(this._ruler=this.getRuler(),t=0,r=a.length;t<r;++t)this.updateElement(a[t],t,e)},updateElement:function(e,t,a){var o=this.chart,l=this.getMeta(),i=this.getDataset(),n=e.custom||{},d=o.options.elements.rectangle;e._xScale=this.getScaleForId(l.xAxisID),e._yScale=this.getScaleForId(l.yAxisID),e._datasetIndex=this.index,e._index=t,e._model={datasetLabel:i.label,label:o.data.labels[t],borderSkipped:n.borderSkipped?n.borderSkipped:d.borderSkipped,backgroundColor:n.backgroundColor?n.backgroundColor:r.valueAtIndexOrDefault(i.backgroundColor,t,d.backgroundColor),borderColor:n.borderColor?n.borderColor:r.valueAtIndexOrDefault(i.borderColor,t,d.borderColor),borderWidth:n.borderWidth?n.borderWidth:r.valueAtIndexOrDefault(i.borderWidth,t,d.borderWidth)},this.updateElementGeometry(e,t,a),e.pivot()},updateElementGeometry:function(e,t,r){var a=e._model,o=this.getValueScale(),l=o.getBasePixel(),i=o.isHorizontal(),n=this._ruler||this.getRuler(),d=this.calculateBarValuePixels(this.index,t),s=this.calculateBarIndexPixels(this.index,t,n);a.horizontal=i,a.base=r?l:d.base,a.x=i?r?l:d.head:s.center,a.y=i?s.center:r?l:d.head,a.height=i?s.size:void 0,a.width=i?void 0:s.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(e){var t,r,a=this.chart,o=this.getIndexScale().options.stacked,l=void 0===e?a.data.datasets.length:e+1,i=[];for(t=0;t<l;++t)(r=a.getDatasetMeta(t)).bar&&a.isDatasetVisible(t)&&(!1===o||!0===o&&-1===i.indexOf(r.stack)||void 0===o&&(void 0===r.stack||-1===i.indexOf(r.stack)))&&i.push(r.stack);return i.length},getStackIndex:function(e){return this.getStackCount(e)-1},getRuler:function(){var e,t,r=this.getIndexScale(),a=this.getStackCount(),o=this.index,l=[],i=r.isHorizontal(),n=i?r.left:r.top,d=n+(i?r.width:r.height);for(e=0,t=this.getMeta().data.length;e<t;++e)l.push(r.getPixelForValue(null,e,o));return{pixels:l,start:n,end:d,stackCount:a,scale:r}},calculateBarValuePixels:function(e,t){var r,a,o,l,i,n,d=this.chart,s=this.getMeta(),c=this.getValueScale(),u=d.data.datasets,h=c.getRightValue(u[e].data[t]),g=c.options.stacked,x=s.stack,b=0;if(g||void 0===g&&void 0!==x)for(r=0;r<e;++r)(a=d.getDatasetMeta(r)).bar&&a.stack===x&&a.controller.getValueScaleId()===c.id&&d.isDatasetVisible(r)&&(o=c.getRightValue(u[r].data[t]),(h<0&&o<0||h>=0&&o>0)&&(b+=o));return l=c.getPixelForValue(b),{size:n=((i=c.getPixelForValue(b+h))-l)/2,base:l,head:i,center:i+n/2}},calculateBarIndexPixels:function(e,t,a){var o,l,i,n,d,s=a.scale.options,c=this.getStackIndex(e),u=a.pixels,h=u[t],g=u.length,x=a.start,b=a.end;return 1===g?(o=h>x?h-x:b-h,l=h<b?b-h:h-x):(t>0&&(o=(h-u[t-1])/2,t===g-1&&(l=o)),t<g-1&&(l=(u[t+1]-h)/2,0===t&&(o=l))),d=(n=((i=o*s.categoryPercentage)+l*s.categoryPercentage)/a.stackCount)*s.barPercentage,h-=i,h+=n*c,{size:d=Math.min(r.valueOrDefault(s.barThickness,d),r.valueOrDefault(s.maxBarThickness,1/0)),base:h+=(n-d)/2,head:h+d,center:h+d/2}},draw:function(){var e=this.chart,t=this.getValueScale(),a=this.getMeta().data,o=this.getDataset(),l=a.length,i=0;for(r.canvas.clipArea(e.ctx,e.chartArea);i<l;++i)isNaN(t.getRightValue(o.data[i]))||a[i].draw();r.canvas.unclipArea(e.ctx)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index,o=e.custom||{},l=e._model;l.backgroundColor=o.hoverBackgroundColor?o.hoverBackgroundColor:r.valueAtIndexOrDefault(t.hoverBackgroundColor,a,r.getHoverColor(l.backgroundColor)),l.borderColor=o.hoverBorderColor?o.hoverBorderColor:r.valueAtIndexOrDefault(t.hoverBorderColor,a,r.getHoverColor(l.borderColor)),l.borderWidth=o.hoverBorderWidth?o.hoverBorderWidth:r.valueAtIndexOrDefault(t.hoverBorderWidth,a,l.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],a=e._index,o=e.custom||{},l=e._model,i=this.chart.options.elements.rectangle;l.backgroundColor=o.backgroundColor?o.backgroundColor:r.valueAtIndexOrDefault(t.backgroundColor,a,i.backgroundColor),l.borderColor=o.borderColor?o.borderColor:r.valueAtIndexOrDefault(t.borderColor,a,i.borderColor),l.borderWidth=o.borderWidth?o.borderWidth:r.valueAtIndexOrDefault(t.borderWidth,a,i.borderWidth)}}),e.controllers.horizontalBar=e.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})};"},"hash":"3e668f3a163543dab65677efbd248360"}