{"dependencies":[{"name":"./core.defaults","loc":{"line":3,"column":23}},{"name":"./core.element","loc":{"line":4,"column":22}},{"name":"../helpers/index","loc":{"line":5,"column":22}},{"name":"./core.ticks","loc":{"line":6,"column":20}}],"generated":{"js":"\"use strict\";var t=require(\"./core.defaults\"),i=require(\"./core.element\"),e=require(\"../helpers/index\"),o=require(\"./core.ticks\");t._set(\"scale\",{display:!0,position:\"left\",offset:!1,gridLines:{display:!0,color:\"rgba(0, 0, 0, 0.1)\",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:\"rgba(0,0,0,0.25)\",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:\"\",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:o.formatters.values,minor:{},major:{}}});function a(t){var i,e,o=[];for(i=0,e=t.length;i<e;++i)o.push(t[i].label);return o}function s(t,i,e){var o=t.getPixelForTick(i);return e&&(o-=0===i?(t.getPixelForTick(1)-o)/2:(o-t.getPixelForTick(i-1))/2),o}module.exports=function(o){function n(t,i,o){return e.isArray(i)?e.longestText(t,o,i):t.measureText(i).width}function r(i){var o=e.valueOrDefault,a=t.global,s=o(i.fontSize,a.defaultFontSize),n=o(i.fontStyle,a.defaultFontStyle),r=o(i.fontFamily,a.defaultFontFamily);return{size:s,style:n,family:r,font:e.fontString(s,n,r)}}function l(i){return e.options.toLineHeight(e.valueOrDefault(i.lineHeight,1.2),e.valueOrDefault(i.fontSize,t.global.defaultFontSize))}o.Scale=i.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var t=this.options.ticks;!1===t.minor&&(t.minor={display:!1}),!1===t.major&&(t.major={display:!1});for(var i in t)\"major\"!==i&&\"minor\"!==i&&(void 0===t.minor[i]&&(t.minor[i]=t[i]),void 0===t.major[i]&&(t.major[i]=t[i]))},beforeUpdate:function(){e.callback(this.options.beforeUpdate,[this])},update:function(t,i,o){var a,s,n,r,l,h;for(this.beforeUpdate(),this.maxWidth=t,this.maxHeight=i,this.margins=e.extend({left:0,right:0,top:0,bottom:0},o),this.longestTextCache=this.longestTextCache||{},this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this.beforeBuildTicks(),l=this.buildTicks()||[],this.afterBuildTicks(),this.beforeTickToLabelConversion(),n=this.convertTicksToLabels(l)||this.ticks,this.afterTickToLabelConversion(),this.ticks=n,a=0,s=n.length;a<s;++a)r=n[a],(h=l[a])?h.label=r:l.push(h={label:r,major:!1});return this._ticks=l,this.beforeCalculateTickRotation(),this.calculateTickRotation(),this.afterCalculateTickRotation(),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate(),this.minSize},afterUpdate:function(){e.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){e.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0},afterSetDimensions:function(){e.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){e.callback(this.options.beforeDataLimits,[this])},determineDataLimits:e.noop,afterDataLimits:function(){e.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){e.callback(this.options.beforeBuildTicks,[this])},buildTicks:e.noop,afterBuildTicks:function(){e.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){e.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var t=this.options.ticks;this.ticks=this.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){e.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){e.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var t=this.ctx,i=this.options.ticks,o=a(this._ticks),s=r(i);t.font=s.font;var n=i.minRotation||0;if(o.length&&this.options.display&&this.isHorizontal())for(var l,h=e.longestText(t,s.font,o,this.longestTextCache),f=h,d=this.getPixelForTick(1)-this.getPixelForTick(0)-6;f>d&&n<i.maxRotation;){var g=e.toRadians(n);if(l=Math.cos(g),Math.sin(g)*h>this.maxHeight){n--;break}n++,f=l*h}this.labelRotation=n},afterCalculateTickRotation:function(){e.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){e.callback(this.options.beforeFit,[this])},fit:function(){var t=this.minSize={width:0,height:0},i=a(this._ticks),o=this.options,s=o.ticks,h=o.scaleLabel,f=o.gridLines,d=o.display,g=this.isHorizontal(),c=r(s),p=o.gridLines.tickMarkLength;if(t.width=g?this.isFullWidth()?this.maxWidth-this.margins.left-this.margins.right:this.maxWidth:d&&f.drawTicks?p:0,t.height=g?d&&f.drawTicks?p:0:this.maxHeight,h.display&&d){var u=l(h)+e.options.toPadding(h.padding).height;g?t.height+=u:t.width+=u}if(s.display&&d){var m=e.longestText(this.ctx,c.font,i,this.longestTextCache),b=e.numberOfLabelLines(i),k=.5*c.size,x=this.options.ticks.padding;if(g){this.longestLabelWidth=m;var T=e.toRadians(this.labelRotation),v=Math.cos(T),L=Math.sin(T)*m+c.size*b+k*(b-1)+k;t.height=Math.min(this.maxHeight,t.height+L+x),this.ctx.font=c.font;var D=n(this.ctx,i[0],c.font),y=n(this.ctx,i[i.length-1],c.font);0!==this.labelRotation?(this.paddingLeft=\"bottom\"===o.position?v*D+3:v*k+3,this.paddingRight=\"bottom\"===o.position?v*k+3:v*y+3):(this.paddingLeft=D/2+3,this.paddingRight=y/2+3)}else s.mirror?m=0:m+=x+k,t.width=Math.min(this.maxWidth,t.width+m),this.paddingTop=c.size/2,this.paddingBottom=c.size/2}this.handleMargins(),this.width=t.width,this.height=t.height},handleMargins:function(){this.margins&&(this.paddingLeft=Math.max(this.paddingLeft-this.margins.left,0),this.paddingTop=Math.max(this.paddingTop-this.margins.top,0),this.paddingRight=Math.max(this.paddingRight-this.margins.right,0),this.paddingBottom=Math.max(this.paddingBottom-this.margins.bottom,0))},afterFit:function(){e.callback(this.options.afterFit,[this])},isHorizontal:function(){return\"top\"===this.options.position||\"bottom\"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(t){if(e.isNullOrUndef(t))return NaN;if(\"number\"==typeof t&&!isFinite(t))return NaN;if(t)if(this.isHorizontal()){if(void 0!==t.x)return this.getRightValue(t.x)}else if(void 0!==t.y)return this.getRightValue(t.y);return t},getLabelForIndex:e.noop,getPixelForValue:e.noop,getValueForPixel:e.noop,getPixelForTick:function(t){var i=this.options.offset;if(this.isHorizontal()){var e=(this.width-(this.paddingLeft+this.paddingRight))/Math.max(this._ticks.length-(i?0:1),1),o=e*t+this.paddingLeft;i&&(o+=e/2);var a=this.left+Math.round(o);return a+=this.isFullWidth()?this.margins.left:0}var s=this.height-(this.paddingTop+this.paddingBottom);return this.top+t*(s/(this._ticks.length-1))},getPixelForDecimal:function(t){if(this.isHorizontal()){var i=(this.width-(this.paddingLeft+this.paddingRight))*t+this.paddingLeft,e=this.left+Math.round(i);return e+=this.isFullWidth()?this.margins.left:0}return this.top+t*this.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var t=this.min,i=this.max;return this.beginAtZero?0:t<0&&i<0?i:t>0&&i>0?t:0},_autoSkip:function(t){var i,o,a,s,n=this.isHorizontal(),r=this.options.ticks.minor,l=t.length,h=e.toRadians(this.labelRotation),f=Math.cos(h),d=this.longestLabelWidth*f,g=[];for(r.maxTicksLimit&&(s=r.maxTicksLimit),n&&(i=!1,(d+r.autoSkipPadding)*l>this.width-(this.paddingLeft+this.paddingRight)&&(i=1+Math.floor((d+r.autoSkipPadding)*l/(this.width-(this.paddingLeft+this.paddingRight)))),s&&l>s&&(i=Math.max(i,Math.floor(l/s)))),o=0;o<l;o++)a=t[o],(i>1&&o%i>0||o%i==0&&o+i>=l)&&o!==l-1&&delete a.label,g.push(a);return g},draw:function(i){var o=this,a=o.options;if(a.display){var n=o.ctx,h=t.global,f=a.ticks.minor,d=a.ticks.major||f,g=a.gridLines,c=a.scaleLabel,p=0!==o.labelRotation,u=o.isHorizontal(),m=f.autoSkip?o._autoSkip(o.getTicks()):o.getTicks(),b=e.valueOrDefault(f.fontColor,h.defaultFontColor),k=r(f),x=e.valueOrDefault(d.fontColor,h.defaultFontColor),T=r(d),v=g.drawTicks?g.tickMarkLength:0,L=e.valueOrDefault(c.fontColor,h.defaultFontColor),D=r(c),y=e.options.toPadding(c.padding),R=e.toRadians(o.labelRotation),F=[],z=\"right\"===a.position?o.left:o.right-v,B=\"right\"===a.position?o.left+v:o.right,C=\"bottom\"===a.position?o.top:o.bottom-v,O=\"bottom\"===a.position?o.top+v:o.bottom;if(e.each(m,function(t,n){if(!e.isNullOrUndef(t.label)){var r,l,d,c,b=t.label;n===o.zeroLineIndex&&a.offset===g.offsetGridLines?(r=g.zeroLineWidth,l=g.zeroLineColor,d=g.zeroLineBorderDash,c=g.zeroLineBorderDashOffset):(r=e.valueAtIndexOrDefault(g.lineWidth,n),l=e.valueAtIndexOrDefault(g.color,n),d=e.valueOrDefault(g.borderDash,h.borderDash),c=e.valueOrDefault(g.borderDashOffset,h.borderDashOffset));var k,x,T,L,D,y,S,P,w,M,W=\"middle\",H=\"middle\",A=f.padding;if(u){var j=v+A;\"bottom\"===a.position?(H=p?\"middle\":\"top\",W=p?\"right\":\"center\",M=o.top+j):(H=p?\"middle\":\"bottom\",W=p?\"left\":\"center\",M=o.bottom-j);var _=s(o,n,g.offsetGridLines&&m.length>1);_<o.left&&(l=\"rgba(0,0,0,0)\"),_+=e.aliasPixel(r),w=o.getPixelForTick(n)+f.labelOffset,k=T=D=S=_,x=C,L=O,y=i.top,P=i.bottom}else{var I,U=\"left\"===a.position;f.mirror?(W=U?\"left\":\"right\",I=A):(W=U?\"right\":\"left\",I=v+A),w=U?o.right-I:o.left+I;var V=s(o,n,g.offsetGridLines&&m.length>1);V<o.top&&(l=\"rgba(0,0,0,0)\"),V+=e.aliasPixel(r),M=o.getPixelForTick(n)+f.labelOffset,k=z,T=B,D=i.left,S=i.right,x=L=y=P=V}F.push({tx1:k,ty1:x,tx2:T,ty2:L,x1:D,y1:y,x2:S,y2:P,labelX:w,labelY:M,glWidth:r,glColor:l,glBorderDash:d,glBorderDashOffset:c,rotation:-1*R,label:b,major:t.major,textBaseline:H,textAlign:W})}}),e.each(F,function(t){if(g.display&&(n.save(),n.lineWidth=t.glWidth,n.strokeStyle=t.glColor,n.setLineDash&&(n.setLineDash(t.glBorderDash),n.lineDashOffset=t.glBorderDashOffset),n.beginPath(),g.drawTicks&&(n.moveTo(t.tx1,t.ty1),n.lineTo(t.tx2,t.ty2)),g.drawOnChartArea&&(n.moveTo(t.x1,t.y1),n.lineTo(t.x2,t.y2)),n.stroke(),n.restore()),f.display){n.save(),n.translate(t.labelX,t.labelY),n.rotate(t.rotation),n.font=t.major?T.font:k.font,n.fillStyle=t.major?x:b,n.textBaseline=t.textBaseline,n.textAlign=t.textAlign;var i=t.label;if(e.isArray(i))for(var o=0,a=0;o<i.length;++o)n.fillText(\"\"+i[o],0,a),a+=1.5*k.size;else n.fillText(i,0,0);n.restore()}}),c.display){var S,P,w=0,M=l(c)/2;if(u)S=o.left+(o.right-o.left)/2,P=\"bottom\"===a.position?o.bottom-M-y.bottom:o.top+M+y.top;else{var W=\"left\"===a.position;S=W?o.left+M+y.top:o.right-M-y.top,P=o.top+(o.bottom-o.top)/2,w=W?-.5*Math.PI:.5*Math.PI}n.save(),n.translate(S,P),n.rotate(w),n.textAlign=\"center\",n.textBaseline=\"middle\",n.fillStyle=L,n.font=D.font,n.fillText(c.labelString,0,0),n.restore()}if(g.drawBorder){n.lineWidth=e.valueAtIndexOrDefault(g.lineWidth,0),n.strokeStyle=e.valueAtIndexOrDefault(g.color,0);var H=o.left,A=o.right,j=o.top,_=o.bottom,I=e.aliasPixel(n.lineWidth);u?(j=_=\"top\"===a.position?o.bottom:o.top,j+=I,_+=I):(H=A=\"left\"===a.position?o.right:o.left,H+=I,A+=I),n.beginPath(),n.moveTo(H,j),n.lineTo(A,_),n.stroke()}}}})};"},"hash":"c32b49db66592d571a27e187291a2578"}