{"dependencies":[{"name":"../core/core.defaults","loc":{"line":3,"column":23}},{"name":"../core/core.element","loc":{"line":4,"column":22}},{"name":"../helpers/index","loc":{"line":5,"column":22}}],"generated":{"js":"\"use strict\";var e=require(\"../core/core.defaults\"),t=require(\"../core/core.element\"),i=require(\"../helpers/index\");e._set(\"global\",{legend:{display:!0,position:\"top\",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var i=t.datasetIndex,n=this.chart,l=n.getDatasetMeta(i);l.hidden=null===l.hidden?!n.data.datasets[i].hidden:null,n.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return i.isArray(t.datasets)?t.datasets.map(function(t,n){return{text:t.label,fillStyle:i.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:n}},this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class=\"'+e.id+'-legend\">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style=\"background-color:'+e.data.datasets[i].backgroundColor+'\"></span>'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push(\"</li>\");return t.push(\"</ul>\"),t.join(\"\")}}),module.exports=function(n){var l=n.layoutService,a=i.noop;function o(e,t){return e.usePointStyle?t*Math.SQRT2:e.boxWidth}n.Legend=t.extend({initialize:function(e){i.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:a,update:function(e,t,i){return this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this.margins=i,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this.beforeBuildLabels(),this.buildLabels(),this.afterBuildLabels(),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate(),this.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0,this.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:function(){var e=this,t=e.options.labels||{},n=i.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(i){return t.filter(i,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:a,beforeFit:a,fit:function(){var t=this,n=t.options,l=n.labels,a=n.display,s=t.ctx,d=e.global,r=i.valueOrDefault,h=r(l.fontSize,d.defaultFontSize),f=r(l.fontStyle,d.defaultFontStyle),u=r(l.fontFamily,d.defaultFontFamily),g=i.fontString(h,f,u),p=t.legendHitBoxes=[],c=t.minSize,b=t.isHorizontal();if(b?(c.width=t.maxWidth,c.height=a?10:0):(c.width=a?10:0,c.height=t.maxHeight),a)if(s.font=g,b){var m=t.lineWidths=[0],v=t.legendItems.length?h+l.padding:0;s.textAlign=\"left\",s.textBaseline=\"top\",i.each(t.legendItems,function(e,i){var n=o(l,h)+h/2+s.measureText(e.text).width;m[m.length-1]+n+l.padding>=t.width&&(v+=h+l.padding,m[m.length]=t.left),p[i]={left:0,top:0,width:n,height:h},m[m.length-1]+=n+l.padding}),c.height+=v}else{var x=l.padding,y=t.columnWidths=[],S=l.padding,k=0,D=0,w=h+x;i.each(t.legendItems,function(e,t){var i=o(l,h)+h/2+s.measureText(e.text).width;D+w>c.height&&(S+=k+l.padding,y.push(k),k=0,D=0),k=Math.max(k,i),D+=w,p[t]={left:0,top:0,width:i,height:h}}),S+=k,y.push(k),c.width+=S}t.width=c.width,t.height=c.height},afterFit:a,isHorizontal:function(){return\"top\"===this.options.position||\"bottom\"===this.options.position},draw:function(){var t=this,n=t.options,l=n.labels,a=e.global,s=a.elements.line,d=t.width,r=t.lineWidths;if(n.display){var h,f=t.ctx,u=i.valueOrDefault,g=u(l.fontColor,a.defaultFontColor),p=u(l.fontSize,a.defaultFontSize),c=u(l.fontStyle,a.defaultFontStyle),b=u(l.fontFamily,a.defaultFontFamily),m=i.fontString(p,c,b);f.textAlign=\"left\",f.textBaseline=\"middle\",f.lineWidth=.5,f.strokeStyle=g,f.fillStyle=g,f.font=m;var v=o(l,p),x=t.legendHitBoxes,y=t.isHorizontal();h=y?{x:t.left+(d-r[0])/2,y:t.top+l.padding,line:0}:{x:t.left+l.padding,y:t.top+l.padding,line:0};var S=p+l.padding;i.each(t.legendItems,function(e,o){var g=f.measureText(e.text).width,c=v+p/2+g,b=h.x,m=h.y;y?b+c>=d&&(m=h.y+=S,h.line++,b=h.x=t.left+(d-r[h.line])/2):m+S>t.bottom&&(b=h.x=b+t.columnWidths[h.line]+l.padding,m=h.y=t.top+l.padding,h.line++),function(e,t,l){if(!(isNaN(v)||v<=0)){f.save(),f.fillStyle=u(l.fillStyle,a.defaultColor),f.lineCap=u(l.lineCap,s.borderCapStyle),f.lineDashOffset=u(l.lineDashOffset,s.borderDashOffset),f.lineJoin=u(l.lineJoin,s.borderJoinStyle),f.lineWidth=u(l.lineWidth,s.borderWidth),f.strokeStyle=u(l.strokeStyle,a.defaultColor);var o=0===u(l.lineWidth,s.borderWidth);if(f.setLineDash&&f.setLineDash(u(l.lineDash,s.borderDash)),n.labels&&n.labels.usePointStyle){var d=p*Math.SQRT2/2,r=d/Math.SQRT2,h=e+r,g=t+r;i.canvas.drawPoint(f,l.pointStyle,d,h,g)}else o||f.strokeRect(e,t,v,p),f.fillRect(e,t,v,p);f.restore()}}(b,m,e),x[o].left=b,x[o].top=m,function(e,t,i,n){var l=p/2,a=v+l+e,o=t+l;f.fillText(i.text,a,o),i.hidden&&(f.beginPath(),f.lineWidth=2,f.moveTo(a,o),f.lineTo(a+n,o),f.stroke())}(b,m,e,g),y?h.x+=c+l.padding:h.y+=S})}},handleEvent:function(e){var t=this.options,i=\"mouseup\"===e.type?\"click\":e.type,n=!1;if(\"mousemove\"===i){if(!t.onHover)return}else{if(\"click\"!==i)return;if(!t.onClick)return}var l=e.x,a=e.y;if(l>=this.left&&l<=this.right&&a>=this.top&&a<=this.bottom)for(var o=this.legendHitBoxes,s=0;s<o.length;++s){var d=o[s];if(l>=d.left&&l<=d.left+d.width&&a>=d.top&&a<=d.top+d.height){if(\"click\"===i){t.onClick.call(this,e.native,this.legendItems[s]),n=!0;break}if(\"mousemove\"===i){t.onHover.call(this,e.native,this.legendItems[s]),n=!0;break}}}return n}});function s(e,t){var i=new n.Legend({ctx:e.ctx,options:t,chart:e});l.configure(e,i,t),l.addBox(e,i),e.legend=i}return{id:\"legend\",beforeInit:function(e){var t=e.options.legend;t&&s(e,t)},beforeUpdate:function(t){var n=t.options.legend,a=t.legend;n?(i.mergeIf(n,e.global.legend),a?(l.configure(t,a,n),a.options=n):s(t,n)):a&&(l.removeBox(t,a),delete t.legend)},afterEvent:function(e,t){var i=e.legend;i&&i.handleEvent(t)}}};"},"hash":"b928d43d21eff6776f19d7e509eb1487"}